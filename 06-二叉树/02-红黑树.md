# 红黑树

## 红黑树的规则

口 1.节点是红色或黑色。
口 2.根节点是黑色。
口 3.每个叶子节点都是黑色的空节点（NIL 节点）。
口 4.每个红色节点的两个子节点都是黑色。（从每个叶子到根的所有路径上不能有两个连续的红色节点）
口 5.从任一节点到其每个叶子的所有路径都包含相同数目的黑色节点。

## 红黑树的插入规则

情况一：新节点 N 位于树的根上，没有父节点.
口 这种情况下，我们直接将红色变换成黑色即可，这样满足性质 2.
情况二：新节点的父节点 P 是黑色.
口性质 4 没有失效（新节点是红色的）性质 5 也没有任何问题.
口尽管新节点 N 有两个黑色的叶子节点 nil，但是心节点 N 是红色的，所以通过它的路径中黑色节点的个数依然相同，满足性质 5
情况三：P 为红色，U 也是红色.
口将 P 和 U 变换为黑色，并且将 G 变换为红色.
口现在新节点 N 有了一个黑色的父节点 P，所以每条路径上黑色节点的数目没有改变
口而从更高的路径上，必然都会经过 G 节点，所以那些路径的黑色节点数目也是不变的，符合性质 5.
可能出现的问题：
口但是，N 的祖父节点 G 的父节点也可能是红色，这就违反了性质 3，可以递归的调整颜色.
口但是如果递归调整颜色到了根节点，就需要进行旋转了，待会儿我们的例子中会遇到这个问题.
情况四：P 为红色，N 的叔叔 U 是黑节点，且 N 是左孩子.
口对祖父节点 G 进行依次右旋转
口在旋转查收的树中，以前的父节点 P 现在是新节点以及以前祖父节点 G 的父节点
口交换以前的父节点 P 和祖父节点 G 的颜色.（P->黑色，G->红色。G 原来一定是黑色，为什么？）
口 B 节点向右平移，称为 G 节点的左子节点.
情况五：口 N 的叔叔 U 是黑色节点，且 N 是右孩子.
口对 P 节点进行依次左旋转(P 变成 N 的左子节点)，形成情况四的结果.
口对祖父节点 G 进行一次右旋转，并且改变颜色即可

## 红黑树的变换规则

插入一个新节点时，有可能树不再平衡，可以通过三种方式的变换，让树保持平衡：
口换色-左旋转-右旋转
